{% extends 'generator/base.html' %}
{% block content %}
<h1>Subir Assets</h1>
<div class="card">
    <p style="color: #aaa; margin-bottom: 20px;">Sube tus archivos de im√°genes y videos para usarlos en tus
        proyectos.</p>

    <form method="post" enctype="multipart/form-data" action="{% url 'generator:upload_asset' %}" id="upload-form">
        {% csrf_token %}
        <div style="border: 2px dashed #444; padding: 40px; text-align: center; border-radius: 12px; background: #222; cursor: pointer; transition: border-color 0.3s;"
            onclick="document.getElementById('file-input').click()" onmouseover="this.style.borderColor='#03dac6'"
            onmouseout="this.style.borderColor='#444'">

            <div style="font-size: 3rem; margin-bottom: 10px;">üñºÔ∏è</div>
            <p style="margin: 0; font-size: 1.1rem;">Haz clic para seleccionar archivos de assets</p>
            <p style="margin: 10px 0 0 0; color: #777; font-size: 0.9rem;">Puedes seleccionar varios a la vez (im√°genes
                y videos)</p>

            <input type="file" name="files" id="file-input" multiple accept="image/*,video/*" style="display: none;"
                onchange="updateFileList(this)">
        </div>

        <div id="file-list" style="margin-top: 20px; display: none;">
            <h3 style="font-size: 1rem; margin-bottom: 10px;">Archivos seleccionados:</h3>
            <ul id="selected-files" style="list-style: none; padding: 0; margin: 0; color: #03dac6; font-size: 0.9rem;">
            </ul>
        </div>

        <div style="margin-top: 30px;">
            <button type="submit" class="btn" id="submit-btn" disabled>Iniciar Carga</button>
            <a href="{% url 'generator:asset_list' %}" class="btn"
                style="background-color: transparent; border: 1px solid #444; margin-left: 10px;">Cancelar</a>
        </div>
    </form>
</div>

<script>
    function updateFileList(input) {
        const list = document.getElementById('selected-files');
        const container = document.getElementById('file-list');
        const btn = document.getElementById('submit-btn');

        list.innerHTML = '';
        if (input.files.length > 0) {
            container.style.display = 'block';
            btn.disabled = false;
            btn.style.opacity = '1';

            for (let i = 0; i < input.files.length; i++) {
                const li = document.createElement('li');
                const icon = input.files[i].type.startsWith('video/') ? 'üé¨' : 'üñºÔ∏è';
                li.textContent = icon + ' ' + input.files[i].name;
                li.style.marginBottom = '5px';
                list.appendChild(li);
            }
        } else {
            container.style.display = 'none';
            btn.disabled = true;
        }
    }
</script>
{% endblock %}